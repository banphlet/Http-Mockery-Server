{"ast":null,"code":"'use strict';\n\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nvar _jsxFileName = \"/home/kudobuzzhq/Desktop/CODES/mockery-server/pages/generate.js\";\nimport React from \"react\";\nimport 'antd/dist/antd.css';\nimport '@shopify/polaris/styles.css';\nimport 'isomorphic-unfetch';\nimport { isEmpty } from 'lodash/fp';\nimport dynamic from 'next/dynamic';\nvar AppProviderDynamic = dynamic(function () {\n  return _Promise.resolve(require('@shopify/polaris').AppProvider);\n}, {});\nimport { Page, Select, TextField, Card } from '@shopify/polaris';\nvar DynamicAceEditor = dynamic(function () {\n  return import('../components/aceEditor');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../components/aceEditor')];\n    },\n    modules: ['../components/aceEditor']\n  }\n});\nimport { message } from 'antd';\nimport { Row, Col } from 'antd';\nvar options = [{\n  label: 'POST',\n  value: 'post'\n}, {\n  label: 'GET',\n  value: 'get'\n}, {\n  label: 'PUT',\n  value: 'put'\n}];\nimport { parseCookies } from 'nookies';\nimport Router from 'next/router';\n\nvar Mocker =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Mocker, _React$Component);\n\n  function Mocker() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Mocker);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Mocker)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      body: '{}',\n      endpoint: '',\n      method: 'get',\n      status: 200,\n      output: \"\\n  {\\n   endpoint:  http://localhost:5000,\\n   method: get,\\n   statusCode: 200,\\n    body: {}\\n  }\\n  \"\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(newValue) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.setState({\n                  method: newValue\n                });\n\n              case 2:\n                _this.changeRender();\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"changeRender\", function () {\n      var output = \"\\n  {\\n    endpoint:  http://localhost:5000/\".concat(_this.state.endpoint, \",\\n    method: \").concat(_this.state.method, \",\\n    statusCode: \").concat(_this.state.status, \" ,\\n    body: \").concat(_this.state.body, \"\\n   }\\n  \");\n\n      _this.setState({\n        output: output\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"saveRequest\",\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var _this$state, output, rest, loader, body;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this$state = _this.state, output = _this$state.output, rest = _objectWithoutProperties(_this$state, [\"output\"]);\n              console.log(rest);\n              loader = message.loading(\"saving request\");\n              body = _objectSpread({}, rest);\n              _context2.prev = 4;\n              _context2.next = 7;\n              return fetch(\"/requests\", {\n                method: \"POST\",\n                body: _JSON$stringify(rest),\n                headers: {\n                  'Content-Type': 'application/json',\n                  \"X-MOCKERY-TOKEN\": parseCookies(null).__token\n                }\n              }).then(function (res) {\n                return res.json();\n              });\n\n            case 7:\n              setTimeout(loader);\n              message.success(\"request saved successfully\");\n              _context2.next = 14;\n              break;\n\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](4);\n              setTimeout(loader);\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[4, 11]]);\n    })));\n\n    return _this;\n  }\n\n  _createClass(Mocker, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(AppProviderDynamic, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(Page, {\n        fullWidth: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(Col, {\n        lg: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(Card, {\n        sectioned: true,\n        title: \"Add new mock endpoint\",\n        primaryFooterAction: {\n          content: 'Add request',\n          disabled: !this.state.body || !this.state.endpoint || !this.state.method || !this.state.status,\n          onAction: function onAction() {\n            return _this2.saveRequest();\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"Endpoint\",\n        type: \"text\",\n        value: this.state.endpoint,\n        prefix: \"http://localhost:5000/\",\n        onChange:\n        /*#__PURE__*/\n        function () {\n          var _ref3 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee3(text) {\n            var hText;\n            return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n              while (1) {\n                switch (_context3.prev = _context3.next) {\n                  case 0:\n                    hText = text.split(' ').join('-').toLowerCase();\n                    _context3.next = 3;\n                    return _this2.setState({\n                      endpoint: hText\n                    });\n\n                  case 3:\n                    _this2.changeRender();\n\n                  case 4:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }\n            }, _callee3);\n          }));\n\n          return function (_x2) {\n            return _ref3.apply(this, arguments);\n          };\n        }(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        style: {\n          marginTop: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), React.createElement(Select, {\n        label: \"Date range\",\n        options: options,\n        onChange: this.handleChange,\n        value: this.state.method,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        style: {\n          marginTop: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        label: \"StatusCode\",\n        type: \"number\",\n        value: this.state.status,\n        onChange:\n        /*#__PURE__*/\n        function () {\n          var _ref4 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee4(text) {\n            return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n              while (1) {\n                switch (_context4.prev = _context4.next) {\n                  case 0:\n                    _context4.next = 2;\n                    return _this2.setState({\n                      status: text\n                    });\n\n                  case 2:\n                    _this2.changeRender();\n\n                  case 3:\n                  case \"end\":\n                    return _context4.stop();\n                }\n              }\n            }, _callee4);\n          }));\n\n          return function (_x3) {\n            return _ref4.apply(this, arguments);\n          };\n        }(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        style: {\n          marginTop: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), \"Request body\", React.createElement(DynamicAceEditor, {\n        onChange:\n        /*#__PURE__*/\n        function () {\n          var _ref5 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee5(newValue) {\n            return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n              while (1) {\n                switch (_context5.prev = _context5.next) {\n                  case 0:\n                    _context5.next = 2;\n                    return _this2.setState({\n                      body: newValue\n                    });\n\n                  case 2:\n                    _this2.changeRender();\n\n                  case 3:\n                  case \"end\":\n                    return _context5.stop();\n                }\n              }\n            }, _callee5);\n          }));\n\n          return function (_x4) {\n            return _ref5.apply(this, arguments);\n          };\n        }(),\n        value: this.state.body,\n        lan: \"javascript\",\n        theme: \"github\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }))), React.createElement(Col, {\n        lg: 11,\n        offset: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(Card, {\n        sectioned: true,\n        title: \"Render output\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(DynamicAceEditor, {\n        lan: \"markdown\",\n        height: \"40vh\",\n        disabled: true,\n        value: this.state.output,\n        theme: \"github\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }))))));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6(ctx) {\n        var cookie;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                cookie = parseCookies(ctx);\n\n                if (cookie.__token) {\n                  _context6.next = 5;\n                  break;\n                }\n\n                if (process.browser) {\n                  _context6.next = 4;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", ctx.res.redirect(\"/users\"));\n\n              case 4:\n                return _context6.abrupt(\"return\", Router.push(\"/users\"));\n\n              case 5:\n                return _context6.abrupt(\"return\", {});\n\n              case 6:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      function getInitialProps(_x5) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Mocker;\n}(React.Component);\n\nexport { Mocker as default };","map":{"version":3,"sources":["/home/kudobuzzhq/Desktop/CODES/mockery-server/pages/generate.js"],"names":["isEmpty","dynamic","AppProviderDynamic","resolve","require","AppProvider","Page","Select","TextField","Card","DynamicAceEditor","ssr","message","Row","Col","options","label","value","parseCookies","Router","Mocker","body","endpoint","method","status","output","newValue","setState","changeRender","state","rest","console","log","loader","loading","fetch","headers","__token","then","res","json","setTimeout","success","content","disabled","onAction","saveRequest","text","hText","split","join","toLowerCase","marginTop","handleChange","ctx","cookie","process","browser","redirect","push","React","Component"],"mappings":"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","sourcesContent":["'use strict'\nimport 'antd/dist/antd.css'\nimport '@shopify/polaris/styles.css'\nimport 'isomorphic-unfetch'\nimport { isEmpty } from 'lodash/fp'\n\nimport dynamic from 'next/dynamic'\nconst AppProviderDynamic = dynamic(() =>\n  Promise.resolve(require('@shopify/polaris').AppProvider)\n)\nimport { Page, Select, TextField, Card } from '@shopify/polaris'\n\nconst DynamicAceEditor = dynamic(() => import('../components/aceEditor'), {\n  ssr: false,\n})\nimport { message } from 'antd'\n\nimport { Row, Col } from 'antd'\n\nconst options = [\n  { label: 'POST', value: 'post' },\n  { label: 'GET', value: 'get' },\n  { label: 'PUT', value: 'put' },\n]\n\nimport { parseCookies } from 'nookies'\nimport Router from 'next/router'\n\nexport default class Mocker extends React.Component {\n\n  static async getInitialProps(ctx) {\n   const cookie =  parseCookies(ctx)\n\n   if(!cookie.__token){\n     if(!process.browser) return ctx.res.redirect(\"/users\")\n     return Router.push(\"/users\")\n   }\n\n   return {}\n  }\n  \n  state = {\n    body: '{}',\n    endpoint: '',\n    method: 'get',\n    status: 200,\n    output: `\n  {\n   endpoint:  http://localhost:5000,\n   method: get,\n   statusCode: 200,\n    body: {}\n  }\n  `,\n  }\n\n  handleChange = async (newValue) => {\n    await this.setState({ method: newValue })\n    this.changeRender()\n  }\n\n  changeRender = () => {\n    const output = `\n  {\n    endpoint:  http://localhost:5000/${this.state.endpoint},\n    method: ${this.state.method},\n    statusCode: ${this.state.status} ,\n    body: ${this.state.body}\n   }\n  `\n\n    this.setState({ output })\n  }\n\n\n  saveRequest = async ()=>{\n    const { output, ...rest } = this.state\n    console.log(rest)\n    const loader = message.loading(\"saving request\")\n    const body = {\n      ...rest\n    }\n\n    try {\n      await fetch(\"/requests\", {\n        method: \"POST\",\n        body: JSON.stringify(rest),\n        headers: {\n          'Content-Type': 'application/json',\n          \"X-MOCKERY-TOKEN\": parseCookies(null).__token\n         }\n      }).then(res=> res.json())\n      setTimeout(loader);\n      message.success(\"request saved successfully\")\n    } catch (error) {\n      setTimeout(loader);\n    }\n\n  }\n\n  render() {\n    return (\n      <AppProviderDynamic>\n        <Page fullWidth>\n          <Row>\n            <Col lg={12}>\n              <Card\n                sectioned\n                title=\"Add new mock endpoint\"\n                primaryFooterAction={{ content: 'Add request', \n                disabled: !this.state.body || !this.state.endpoint || !this.state.method || !this.state.status,\n                onAction: ()=> this.saveRequest()\n              \n              }}\n              >\n                <TextField\n                  label=\"Endpoint\"\n                  type=\"text\"\n                  value={this.state.endpoint}\n                  prefix=\"http://localhost:5000/\"\n                  onChange={async text => {\n                    const hText = text\n                      .split(' ')\n                      .join('-')\n                      .toLowerCase()\n                    await this.setState({ endpoint: hText })\n                    this.changeRender()\n                  }}\n                />\n                <p style={{ marginTop: 20 }} />\n                <Select\n                  label=\"Date range\"\n                  options={options}\n                  onChange={this.handleChange}\n                  value={this.state.method}\n                />\n                <p style={{ marginTop: 20 }} />\n                <TextField\n                  label=\"StatusCode\"\n                  type=\"number\"\n                  value={this.state.status}\n                  onChange={async text => {\n                    await this.setState({ status: text })\n                    this.changeRender()\n                  }}\n                />\n                <p style={{ marginTop: 20 }} />\n                Request body\n                <DynamicAceEditor\n                  onChange={async newValue => {\n                    await this.setState({ body: newValue })\n                    this.changeRender()\n                  }}\n                  value={this.state.body}\n                  lan=\"javascript\"\n                  theme=\"github\"\n                />\n              </Card>\n            </Col>\n\n            <Col lg={11} offset={1}>\n              <Card sectioned title=\"Render output\">\n                <DynamicAceEditor\n                  lan=\"markdown\"\n                  height=\"40vh\"\n                  disabled={true}\n                  value={this.state.output}\n                  theme=\"github\"\n                />\n              </Card>\n            </Col>\n          </Row>\n        </Page>\n      </AppProviderDynamic>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}